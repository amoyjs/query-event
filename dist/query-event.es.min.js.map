{"version":3,"file":"query-event.es.min.js","sources":["../src/touch/eventBus.ts","../node_modules/@amoy/common/dist/common.es.js","../src/common/index.ts","../src/touch/utils.ts","../src/touch/index.ts","../src/index.ts"],"sourcesContent":["import { QueryEvent } from '../types'\n\nexport default class EventBus {\n    private handlers: QueryEvent.Handler[] = []\n    public add(handler: QueryEvent.Handler) {\n        this.handlers.push(handler)\n        return this\n    }\n    public del(handler: QueryEvent.Handler) {\n        if (!handler) {\n            this.handlers = []\n        } else {\n            this.handlers.map((value, index) => {\n                value === handler && this.handlers.splice(index, 1)\n            })\n        }\n        return this\n    }\n    public fire(evObj: QueryEvent.RTouchEvent) {\n        if (!this.handlers || !this.handlers.length) return\n        this.handlers.map((handler) => {\n            if (typeof handler === 'function') handler(evObj)\n        })\n        return this\n    }\n    public clear() {\n        this.handlers = []\n    }\n}\n","function type(object) {\n    var class2type = {};\n    var type = class2type.toString.call(object);\n    var typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol';\n    if (object == null)\n        return object + '';\n    typeString.split(' ').forEach(function (type) {\n        class2type[\"[object \" + type + \"]\"] = type.toLowerCase();\n    });\n    var isObject = typeof object === 'object';\n    var isFn = typeof object === 'function';\n    return isObject || isFn ? class2type[type] || 'object' : typeof object;\n}\nfunction isPlainObject(object) {\n    var class2type = {};\n    var toString = class2type.toString;\n    var hasOwn = class2type.hasOwnProperty;\n    var fnToString = hasOwn.toString;\n    var ObjectFunctionString = fnToString.call(Object);\n    var prototype, ctor;\n    if (!object || toString.call(object) !== '[object Object]') {\n        return false;\n    }\n    prototype = Object.getPrototypeOf(object);\n    if (!prototype)\n        return true;\n    ctor = hasOwn.call(prototype, 'constructor') && prototype.constructor;\n    return typeof ctor === 'function' && fnToString.call(ctor) === ObjectFunctionString;\n}\nfunction extend() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var options, name, clone, copy, source, copyIsArray, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;\n    if (typeof target === 'boolean') {\n        deep = target;\n        target = arguments[i] || {};\n        i++;\n    }\n    if (typeof target !== 'object' && type(target) !== 'function') {\n        target = {};\n    }\n    if (i === length) {\n        target = this;\n        i--;\n    }\n    for (; i < length; i++) {\n        //\n        if ((options = arguments[i]) !== null) {\n            // for in source object\n            for (name in options) {\n                source = target[name];\n                copy = options[name];\n                if (target == copy) {\n                    continue;\n                }\n                // deep clone\n                if (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n                    // if copy is array\n                    if (copyIsArray) {\n                        copyIsArray = false;\n                        // if is not array, set it to array\n                        clone = source && Array.isArray(source) ? source : [];\n                    }\n                    else {\n                        // if copy is not a object, set it to object\n                        clone = source && isPlainObject(source) ? source : {};\n                    }\n                    target[name] = extend(deep, clone, copy);\n                }\n                else if (copy !== undefined) {\n                    target[name] = copy;\n                }\n            }\n        }\n    }\n    return target;\n}\n\nexport { extend, isPlainObject, type };\n//# sourceMappingURL=common.es.js.map\n","import { type } from '@amoy/common'\n\nexport const get = (root: any, get: string) => {\n    if (type(root) !== 'object') return root\n    let value = root\n    const keyArr = get.split('.')\n    for (let i = 0, l = keyArr.length; i < l; i++) {\n        const v = keyArr[i]\n        if (v) {\n            if (value[v]) {\n                value = value[v]\n            } else {\n                value = undefined\n                break\n            }\n        }\n    }\n    return value\n}","import { QueryEvent } from '../types'\nimport { get } from '../common'\n\nexport default {\n    getFingers(ev: QueryEvent.PixiEvent) {\n        return get(ev, 'data.originalEvent.touches.length') || 1\n    },\n    getPoint(ev: QueryEvent.PixiEvent, index: 0 | 1) {\n        if (ev.data.pointerType === 'touch') {\n            const touches = ev.data.originalEvent.touches\n            return {\n                x: Math.round(touches[index].pageX),\n                y: Math.round(touches[index].pageY),\n            }\n        } else {\n            return {\n                x: Math.round(ev.data.global.x),\n                y: Math.round(ev.data.global.y),\n            }\n        }\n    },\n    getVector(p1: QueryEvent.Point, p2: QueryEvent.Point) {\n        const x = Math.round(p1.x - p2.x)\n        const y = Math.round(p1.y - p2.y)\n        return { x, y }\n    },\n    getLength(v1: QueryEvent.Point) {\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y)\n    },\n    getAngle(v1: QueryEvent.Point, v2: QueryEvent.Point) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!')\n            return\n        }\n        // 判断方向，顺时针为 1 ,逆时针为 -1；\n        const direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1 : -1\n            // 两个向量的模；\n        const len1 = this.getLength(v1)\n        const len2 = this.getLength(v2)\n        const mr = len1 * len2\n        let dot\n        let r\n        if (mr === 0)return 0\n        // 通过数量积公式可以推导出：\n        // cos = (x1 * x2 + y1 * y2)/(|a| * |b|);\n        dot = v1.x * v2.x + v1.y * v2.y\n        r = dot / mr\n        if (r > 1)r = 1\n        if (r < -1)r = -1\n        // 解值并结合方向转化为角度值；\n        return Math.acos(r) * direction\n    },\n    getAnchorPoint(target: any) {\n        return {\n            x: target.x,\n            y: target.y,\n        }\n    },\n}","import * as PIXI from 'pixi.js'\nimport { QueryEvent } from '../types'\nimport EventBus from './eventBus'\nimport u from './utils'\n\nexport const RTOUCH_SUPPORT_EVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    // 拖动\n    'drag',\n    'dragstart',\n    'dragend',\n    // 双指缩放\n    'pinch',\n    'pinchstart',\n    'pinchend',\n    // 双指旋转\n    'rotate',\n    'rotatestart',\n    'rotateend',\n    // 划动\n    'swipeleft',\n    'swiperight',\n    'swipeup',\n    'swipedown',\n    // 短点击\n    'shorttap',\n    'longtap',\n    // 单指缩放\n    'singlepinch',\n    'singlepinchstart',\n    'singlepinchend',\n    // 单指旋转\n    'singlerotate',\n    'singlerotatestart',\n    'singlerotateend',\n]\n\n// 挟持的原生事件\nconst ORIGIN_EVENT_MAP = [{\n    name: 'pointerdown',\n    fn: '_start',\n}, {\n    name: 'pointermove',\n    fn: '_move',\n}, {\n    name: 'pointerup',\n    fn: '_end',\n}, {\n    name: 'pointerupoutside',\n    fn: '_end',\n}]\n\n// 事件中心\n\nexport default class RTouch {\n    // 精灵\n    private target: PIXI.Sprite | PIXI.Graphics | PIXI.Text\n    // 触摸手指数量\n    private fingers: number = 0\n    // 第一触控点\n    private swipeStartPoint: QueryEvent.Point | null\n    private startPoint: QueryEvent.Point | null\n    private startTime: number\n    // 第二触控点\n    private secondPoint: QueryEvent.Point | null\n    // 初始向量\n    private vector1: QueryEvent.Point | null\n    // 初始向量模\n    private pinchStartLength: number | null\n    // 是否开始触摸\n    // 用于解决 精灵区域外 move 也被触发的问题\n    private touching: boolean = false\n    private singleBasePoint: QueryEvent.Point\n    private singlePinchStartLength: number\n    private Bus: {\n        [evName: string]: EventBus,\n    } = {}\n    constructor(target: PIXI.Sprite | PIXI.Graphics | PIXI.Text) {\n        this.target = target\n        // 初始化事件中心\n        this.initEventBus()\n        // 事件挟持\n        this.bindOriginEvent()\n    }\n    private initEventBus() {\n        RTOUCH_SUPPORT_EVENT.map((evName: string) => {\n            Object.defineProperty(this.Bus, evName, { value: new EventBus() })\n        })\n    }\n    private bindOriginEvent() {\n        ORIGIN_EVENT_MAP.map(({name, fn}) => {\n            this.target.interactive = true\n            this.target.on(name, this[fn], this)\n        })\n    }\n    public _start(ev: QueryEvent.PixiEvent) {\n        this.touching = true\n        this.startTime = Date.now()\n        this.fingers = u.getFingers(ev)\n        this.singleBasePoint = u.getAnchorPoint(this.target)\n        // 记录第一触控点\n        this.swipeStartPoint = this.startPoint = u.getPoint(ev, 0)\n\n        if (this.fingers === 1) {\n            // 单指且监听 singlePinch 时，计算向量模；\n            const startVector = u.getVector(this.startPoint, this.singleBasePoint)\n            this.singlePinchStartLength = u.getLength(startVector)\n        } else if (this.fingers > 1) {\n            // 双指操作时，记录第二触控点\n            this.secondPoint = u.getPoint(ev, 1)\n            // 计算双指向量；\n            this.vector1 = u.getVector(this.secondPoint, this.startPoint)\n            // 计算向量模\n            this.pinchStartLength = u.getLength(this.vector1)\n        }\n\n        this.fireEvent('touchstart', {\n            origin: ev,\n        })\n    }\n    public _move(ev: QueryEvent.PixiEvent) {\n        if (!this.touching) return\n        const curPoint = u.getPoint(ev, 0)\n        // 判断触控区域是否为单指操作的按钮\n        // const isSingleButton = ev.tapTarget.name === 'singlebutton'\n        const isSingleButton = false\n        if (!this.startPoint) this.startPoint = curPoint\n        if (this.fingers > 1) {\n            // 双指操作， 触发 pinch 与 rotate\n            const curSecPoint = u.getPoint(ev, 1)\n            const vector2 = u.getVector(curSecPoint, curPoint)\n            const pinchLength = u.getLength(vector2)\n\n            if (this.pinchStartLength) {\n                this.eventStart('pinch', {\n                    origin: ev,\n                    delta: {\n                        scale: pinchLength / this.pinchStartLength,\n                    },\n                })\n                this.pinchStartLength = pinchLength\n            }\n\n            if (this.vector1) {\n                this.eventStart('rotate', {\n                    delta: {\n                        rotate: u.getAngle(this.vector1, vector2),\n                    },\n                    origin: ev,\n                })\n                this.vector1 = vector2\n            }\n        } else {\n            // 触发 单指缩放\n            if (isSingleButton) {\n                const pinchV2 = u.getVector(curPoint, this.singleBasePoint)\n                const singlePinchLength = u.getLength(pinchV2)\n\n                this.eventStart('singlepinch', {\n                    delta: {\n                        scale: singlePinchLength / this.singlePinchStartLength,\n                        deltaX: curPoint.x - this.startPoint.x,\n                        deltaY: curPoint.y - this.startPoint.y,\n                    },\n                    origin: ev,\n                })\n                this.singlePinchStartLength = singlePinchLength\n            }\n            // 触发 单指旋转;\n            if (isSingleButton) {\n                const rotateV1 = u.getVector(this.startPoint, this.singleBasePoint)\n                const rotateV2 = u.getVector(curPoint, this.singleBasePoint)\n\n                this.eventStart('singlerotate', {\n                    delta: {\n                        rotate: u.getAngle(rotateV1, rotateV2),\n                    },\n                    origin: ev,\n                })\n            }\n        }\n\n        // 触发 drag\n        this.eventStart('drag', {\n            delta: {\n                x: curPoint.x - this.startPoint.x,\n                y: curPoint.y - this.startPoint.y,\n            },\n            origin: ev,\n        })\n\n        this.fireEvent('touchmove', {\n            origin: ev,\n        })\n\n        this.startPoint = curPoint\n    }\n    public _end(ev: QueryEvent.PixiEvent) {\n        const evArr = ['pinch', 'drag', 'rotate', 'singlerotate', 'singlepinch']\n        this.touching = false\n        this.fingers = u.getFingers(ev)\n\n        evArr.map((evName: string) => {\n            this.eventEnd(evName, {\n                origin: ev,\n                type: evName,\n            })\n        })\n\n        if (this.swipeStartPoint) {\n            const endPoint = {\n                x: Math.round(ev.data.global.x),\n                y: Math.round(ev.data.global.y),\n            }\n            const deltaX = endPoint.x - this.swipeStartPoint.x\n            const deltaY = endPoint.y - this.swipeStartPoint.y\n            const endTime = Date.now()\n            let eventType: string = ''\n            if (deltaX > 30 && Math.abs(deltaY) < 100) {\n                // 右划\n                eventType = 'swiperight'\n            } else if (deltaX < -30 && Math.abs(deltaY) < 100) {\n                // 左划\n                eventType = 'swipeleft'\n            } else if (deltaY > 30 && Math.abs(deltaX) < 100) {\n                // 下划\n                eventType = 'swipedown'\n            } else if (deltaY < -30 && Math.abs(deltaX) < 100) {\n                // 上划\n                eventType = 'swipeup'\n            } else if (Math.abs(deltaX) < 30 && Math.abs(deltaY) < 30 ) {\n                if (endTime - this.startTime < 500) {\n                    // 触发短点击\n                    eventType = 'shorttap'\n                } else {\n                    // 触发长按\n                    eventType = 'longtap'\n                }\n            }\n\n            if (eventType) {\n                this.fireEvent(eventType, {\n                    origin: ev,\n                })\n            }\n        }\n\n        this.fireEvent('touchend', {\n            origin: ev,\n        })\n    }\n    private fireEvent(evName: string, ev: {\n        origin: QueryEvent.PixiEvent,\n        [any: string]: any,\n    }) {\n        if (this.Bus[evName]) {\n            this.Bus[evName].fire(Object.assign(ev, {\n                type: evName,\n                stopPropagation() {\n                    ev.origin.stopPropagation()\n                },\n            }))\n        }\n    }\n    public destory() {\n        ORIGIN_EVENT_MAP.map(({name, fn}) => {\n            this.target.off(name, this[fn], this)\n        })\n    }\n\n    private eventStart(evName: string, ev: {\n        origin: QueryEvent.PixiEvent,\n        [any: string]: any,\n    }) {\n        const ing = `${evName}ing`\n        const start = `${evName}start`\n        if (!this[ing]) {\n            this.fireEvent(start, ev)\n            this[ing] = true\n        } else {\n            this.fireEvent(evName, ev)\n        }\n    }\n\n    private eventEnd(evName: string, ev: QueryEvent.RTouchEvent) {\n        const ing = `${evName}ing`\n        const end = `${evName}end`\n        if (this[ing]) {\n            ev.type = end\n            this.fireEvent(end, ev)\n            this[ing] = false\n        }\n    }\n\n    public on(evName: string, handler: QueryEvent.Handler) {\n        const _evName = evName.trim().toLowerCase()\n        _evName.split(' ').map((name: string) => {\n            this.Bus[name].add(handler)\n        })\n        return this\n    }\n\n    public off(evName: string, handler?: QueryEvent.Handler) {\n        const _evName = evName.trim().toLowerCase()\n        _evName.split(' ').map((name: string) => {\n            handler ? this.Bus[name].del(handler) : this.Bus[name].clear()\n        })\n        return this\n    }\n}","import { QueryEvent } from './types'\nimport RTouch, { RTOUCH_SUPPORT_EVENT } from './touch';\n\ntype callback = (ev: QueryEvent.RTouchEvent) => void\n\nfunction bind(target: any, evName: string, fn: callback) {\n    if (RTOUCH_SUPPORT_EVENT.includes(evName)) {\n        if (!target['RTouch']) target['RTouch'] = new RTouch(target)\n        target['RTouch'].on(evName, fn)\n    } else {\n        target.interactive = true\n        target.on(evName, fn)\n    }\n}\n\nfunction off(target: any, evName: string, fn?: callback) {\n    if (RTOUCH_SUPPORT_EVENT.includes(evName) && target['RTouch']) {\n        target['RTouch'].off(evName, fn)\n    } else {\n        target.interactive = true\n        target.off(evName, fn)\n    }\n}\n\nexport const event = {\n    on(name: string = '', closure: () => void = () => { }) {\n        const events = name.split(' ')\n        for (let i = 0; i < this.length; i++) {\n            for (let j = 0; j < events.length; j++) {\n                this[i].interactive = true\n                bind(this[i], events[j], closure)\n            }\n        }\n        return this\n    },\n    off(name: string = '') {\n        const events = name.split(' ')\n        for (let i = 0; i < this.length; i++) {\n            for (let j = 0; j < events.length; j++) {\n                this[i].off(events[j])\n                off(this[i], events[j])\n            }\n        }\n        return this\n    }\n}\n\nexport default event\n\n// @ts-ignore\nif (window.query) window.query.extend(event)"],"names":["EventBus","handler","handlers","push","map","value","index","_this","splice","evObj","length","type","object","class2type","toString","call","split","forEach","toLowerCase","get","root","v","keyArr","i","l","getFingers","ev","getPoint","Math","round","data","pointerType","touches","originalEvent","x","pageX","y","pageY","global","getVector","p1","p2","getLength","v1","sqrt","getAngle","v2","acos","console","error","dot","r","direction","len1","len2","mr","getAnchorPoint","target","RTOUCH_SUPPORT_EVENT","ORIGIN_EVENT_MAP","name","fn","initEventBus","bindOriginEvent","RTouch","evName","Object","defineProperty","Bus","_a","interactive","on","touching","startTime","Date","now","fingers","u","singleBasePoint","swipeStartPoint","startPoint","startVector","singlePinchStartLength","secondPoint","vector1","pinchStartLength","fireEvent","origin","curPoint","curSecPoint","vector2","pinchLength","eventStart","delta","scale","rotate","abs","eventEnd","endPoint","deltaX","deltaY","endTime","eventType","fire","assign","stopPropagation","off","ing","end","_evName","trim","add","del","clear","bind","includes","event","closure","events","j","window","query","extend"],"mappings":"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"}